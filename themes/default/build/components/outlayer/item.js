(function(e,t){typeof define=="function"&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(n,r,i,s){return t(e,n,r,i,s)}):typeof exports=="object"?module.exports=t(e,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EventEmitter,e.getSize,e.getStyleProperty,e.fizzyUIUtils))})(window,function(t,n,r,i,s){function a(e){for(var t in e)return!1;return t=null,!0}function m(e,t){if(!e)return;this.element=e,this.layout=t,this.position={x:0,y:0},this._create()}function g(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var o=t.getComputedStyle,u=o?function(e){return o(e,null)}:function(e){return e.currentStyle},f=i("transition"),l=i("transform"),c=f&&l,h=!!i("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[f],d=["transform","transition","transitionDuration","transitionProperty"],v=function(){var e={};for(var t=0,n=d.length;t<n;t++){var r=d[t],s=i(r);s&&s!==r&&(e[r]=s)}return e}();s.extend(m.prototype,n.prototype),m.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},m.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},m.prototype.getSize=function(){this.size=r(this.element)},m.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=v[n]||n;t[r]=e[n]}},m.prototype.getPosition=function(){var e=u(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=e[n?"left":"right"],s=e[r?"top":"bottom"],o=this.layout.size,a=i.indexOf("%")!=-1?parseFloat(i)/100*o.width:parseInt(i,10),f=s.indexOf("%")!=-1?parseFloat(s)/100*o.height:parseInt(s,10);a=isNaN(a)?0:a,f=isNaN(f)?0:f,a-=n?o.paddingLeft:o.paddingRight,f-=r?o.paddingTop:o.paddingBottom,this.position.x=a,this.position.y=f},m.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={},r=t.isOriginLeft?"paddingLeft":"paddingRight",i=t.isOriginLeft?"left":"right",s=t.isOriginLeft?"right":"left",o=this.position.x+e[r];n[i]=this.getXValue(o),n[s]="";var u=t.isOriginTop?"paddingTop":"paddingBottom",a=t.isOriginTop?"top":"bottom",f=t.isOriginTop?"bottom":"top",l=this.position.y+e[u];n[a]=this.getYValue(l),n[f]="",this.css(n),this.emitEvent("layout",[this])},m.prototype.getXValue=function(e){var t=this.layout.options;return t.percentPosition&&!t.isHorizontal?e/this.layout.size.width*100+"%":e+"px"},m.prototype.getYValue=function(e){var t=this.layout.options;return t.percentPosition&&t.isHorizontal?e/this.layout.size.height*100+"%":e+"px"},m.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;this.setPosition(e,t);if(o&&!this.isTransitioning){this.layoutPosition();return}var u=e-n,a=t-r,f={};f.transform=this.getTranslate(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},m.prototype.getTranslate=function(e,t){var n=this.layout.options;return e=n.isOriginLeft?e:-e,t=n.isOriginTop?t:-t,h?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px, "+t+"px)"},m.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},m.prototype.moveTo=c?m.prototype._transitionTo:m.prototype.goTo,m.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},m.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},m.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var y="opacity,"+g(v.transform||"transform");m.prototype.enableTransition=function(){if(this.isTransitioning)return;this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1)},m.prototype.transition=m.prototype[f?"_transition":"_nonTransition"],m.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},m.prototype.onotransitionend=function(e){this.ontransitionend(e)};var b={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};m.prototype.ontransitionend=function(e){if(e.target!==this.element)return;var t=this._transn,n=b[e.propertyName]||e.propertyName;delete t.ingProperties[n],a(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]);if(n in t.onEnd){var r=t.onEnd[n];r.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])},m.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},m.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var w={transitionProperty:"",transitionDuration:""};return m.prototype.removeTransitionStyles=function(){this.css(w)},m.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},m.prototype.remove=function(){if(!f||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()},m.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},m.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},m.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},m.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},m.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},m.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},m});