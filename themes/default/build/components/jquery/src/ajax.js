define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(e,t,n,r,i,s){function o(t){return function(r,i){typeof r!="string"&&(i=r,r="*");var s,o=0,u=r.toLowerCase().match(n)||[];if(e.isFunction(i))while(s=u[o++])s[0]==="+"?(s=s.slice(1)||"*",(t[s]=t[s]||[]).unshift(i)):(t[s]=t[s]||[]).push(i)}}function u(t,n,r,i){function s(a){var f;return o[a]=!0,e.each(t[a]||[],function(e,t){var a=t(n,r,i);if(typeof a=="string"&&!u&&!o[a])return n.dataTypes.unshift(a),s(a),!1;if(u)return!(f=a)}),f}var o={},u=t===y;return s(n.dataTypes[0])||!o["*"]&&s("*")}function a(t,n){var r,i,s=e.ajaxSettings.flatOptions||{};for(r in n)n[r]!==undefined&&((s[r]?t:i||(i={}))[r]=n[r]);return i&&e.extend(!0,t,i),t}function f(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function l(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}var c=/#.*$/,h=/([?&])_=[^&]*/,p=/^(.*?):[ \t]*([^\r\n]*)$/mg,d=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,v=/^(?:GET|HEAD)$/,m=/^\/\//,g={},y={},b="*/".concat("*"),w=t.createElement("a");return w.href=r.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:d.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":b,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?a(a(t,e.ajaxSettings),n):a(e.ajaxSettings,t)},ajaxPrefilter:o(g),ajaxTransport:o(y),ajax:function(o,a){function d(t,n,r,i){var s,o,u,a,c,h=n;if(j===2)return;j=2,N&&window.clearTimeout(N),E=undefined,x=i||"",I.readyState=t>0?4:0,s=t>=200&&t<300||t===304,r&&(a=f(A,I,r)),a=l(A,a,I,s);if(s)A.ifModified&&(c=I.getResponseHeader("Last-Modified"),c&&(e.lastModified[S]=c),c=I.getResponseHeader("etag"),c&&(e.etag[S]=c)),t===204||A.type==="HEAD"?h="nocontent":t===304?h="notmodified":(h=a.state,o=a.data,u=a.error,s=!u);else{u=h;if(t||!h)h="error",t<0&&(t=0)}I.status=t,I.statusText=(n||h)+"",s?_.resolveWith(O,[o,h,I]):_.rejectWith(O,[I,h,u]),I.statusCode(P),P=undefined,k&&M.trigger(s?"ajaxSuccess":"ajaxError",[I,A,s?o:u]),D.fireWith(O,[I,h]),k&&(M.trigger("ajaxComplete",[I,A]),--e.active||e.event.trigger("ajaxStop"))}typeof o=="object"&&(a=o,o=undefined),a=a||{};var E,S,x,T,N,C,k,L,A=e.ajaxSetup({},a),O=A.context||A,M=A.context&&(O.nodeType||O.jquery)?e(O):e.event,_=e.Deferred(),D=e.Callbacks("once memory"),P=A.statusCode||{},H={},B={},j=0,F="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(j===2){if(!T){T={};while(t=p.exec(x))T[t[1].toLowerCase()]=t[2]}t=T[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return j===2?x:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return j||(e=B[n]=B[n]||e,H[e]=t),this},overrideMimeType:function(e){return j||(A.mimeType=e),this},statusCode:function(e){var t;if(e)if(j<2)for(t in e)P[t]=[P[t],e[t]];else I.always(e[I.status]);return this},abort:function(e){var t=e||F;return E&&E.abort(t),d(0,t),this}};_.promise(I).complete=D.add,I.success=I.done,I.error=I.fail,A.url=((o||A.url||r.href)+"").replace(c,"").replace(m,r.protocol+"//"),A.type=a.method||a.type||A.method||A.type,A.dataTypes=e.trim(A.dataType||"*").toLowerCase().match(n)||[""];if(A.crossDomain==null){C=t.createElement("a");try{C.href=A.url,C.href=C.href,A.crossDomain=w.protocol+"//"+w.host!=C.protocol+"//"+C.host}catch(q){A.crossDomain=!0}}A.data&&A.processData&&typeof A.data!="string"&&(A.data=e.param(A.data,A.traditional)),u(g,A,a,I);if(j===2)return I;k=e.event&&A.global,k&&e.active++===0&&e.event.trigger("ajaxStart"),A.type=A.type.toUpperCase(),A.hasContent=!v.test(A.type),S=A.url,A.hasContent||(A.data&&(S=A.url+=(s.test(S)?"&":"?")+A.data,delete A.data),A.cache===!1&&(A.url=h.test(S)?S.replace(h,"$1_="+i++):S+(s.test(S)?"&":"?")+"_="+i++)),A.ifModified&&(e.lastModified[S]&&I.setRequestHeader("If-Modified-Since",e.lastModified[S]),e.etag[S]&&I.setRequestHeader("If-None-Match",e.etag[S])),(A.data&&A.hasContent&&A.contentType!==!1||a.contentType)&&I.setRequestHeader("Content-Type",A.contentType),I.setRequestHeader("Accept",A.dataTypes[0]&&A.accepts[A.dataTypes[0]]?A.accepts[A.dataTypes[0]]+(A.dataTypes[0]!=="*"?", "+b+"; q=0.01":""):A.accepts["*"]);for(L in A.headers)I.setRequestHeader(L,A.headers[L]);if(!A.beforeSend||A.beforeSend.call(O,I,A)!==!1&&j!==2){F="abort";for(L in{success:1,error:1,complete:1})I[L](A[L]);E=u(y,A,a,I);if(!E)d(-1,"No Transport");else{I.readyState=1,k&&M.trigger("ajaxSend",[I,A]);if(j===2)return I;A.async&&A.timeout>0&&(N=window.setTimeout(function(){I.abort("timeout")},A.timeout));try{j=1,E.send(H,d)}catch(q){if(!(j<2))throw q;d(-1,q)}}return I}return I.abort()},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,undefined,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,r,i,s){return e.isFunction(r)&&(s=s||i,i=r,r=undefined),e.ajax(e.extend({url:t,type:n,dataType:s,data:r,success:i},e.isPlainObject(t)&&t))}}),e});