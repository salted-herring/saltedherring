define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,r){function o(t,n,o){var u;if(o===undefined&&t.nodeType===1){u="data-"+n.replace(s,"-$&").toLowerCase(),o=t.getAttribute(u);if(typeof o=="string"){try{o=o==="true"?!0:o==="false"?!1:o==="null"?null:+o+""===o?+o:i.test(o)?e.parseJSON(o):o}catch(a){}r.set(t,n,o)}else o=undefined}return o}var i=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,s=/[A-Z]/g;return e.extend({hasData:function(e){return r.hasData(e)||n.hasData(e)},data:function(e,t,n){return r.access(e,t,n)},removeData:function(e,t){r.remove(e,t)},_data:function(e,t,r){return n.access(e,t,r)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(i,u){var a,f,l,c=this[0],h=c&&c.attributes;if(i===undefined){if(this.length){l=r.get(c);if(c.nodeType===1&&!n.get(c,"hasDataAttrs")){a=h.length;while(a--)h[a]&&(f=h[a].name,f.indexOf("data-")===0&&(f=e.camelCase(f.slice(5)),o(c,f,l[f])));n.set(c,"hasDataAttrs",!0)}}return l}return typeof i=="object"?this.each(function(){r.set(this,i)}):t(this,function(t){var n,u;if(c&&t===undefined){n=r.get(c,i)||r.get(c,i.replace(s,"-$&").toLowerCase());if(n!==undefined)return n;u=e.camelCase(i),n=r.get(c,u);if(n!==undefined)return n;n=o(c,u,undefined);if(n!==undefined)return n;return}u=e.camelCase(i),this.each(function(){var e=r.get(this,u);r.set(this,u,t),i.indexOf("-")>-1&&e!==undefined&&r.set(this,i,t)})},null,u,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){r.remove(this,e)})}}),e});