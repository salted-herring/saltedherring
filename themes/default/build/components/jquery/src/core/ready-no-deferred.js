define(["../core","../var/document"],function(e,t){function n(){t.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),e.ready()}var r=[],i=function(e){r.push(e)},s=function(n){window.setTimeout(function(){n.call(t,e)})};e.fn.ready=function(e){return i(e),this},e.extend({isReady:!1,readyWait:1,ready:function(t){if(t===!0?--e.readyWait:e.isReady)return;e.isReady=!0;if(t!==!0&&--e.readyWait>0)return;i=function(t){r.push(t);while(r.length)t=r.shift(),e.isFunction(t)&&s(t)},i()}}),e.ready.then=e.fn.ready,t.readyState==="complete"||t.readyState!=="loading"&&!t.documentElement.doScroll?window.setTimeout(e.ready):(t.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))});