define(["../core","../var/document","../core/init","../deferred"],function(e,t){function n(){t.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),e.ready()}var r;e.fn.ready=function(t){return e.ready.promise().done(t),this},e.extend({isReady:!1,readyWait:1,holdReady:function(t){t?e.readyWait++:e.ready(!0)},ready:function(n){if(n===!0?--e.readyWait:e.isReady)return;e.isReady=!0;if(n!==!0&&--e.readyWait>0)return;r.resolveWith(t,[e]),e.fn.triggerHandler&&(e(t).triggerHandler("ready"),e(t).off("ready"))}}),e.ready.promise=function(i){return r||(r=e.Deferred(),t.readyState==="complete"||t.readyState!=="loading"&&!t.documentElement.doScroll?window.setTimeout(e.ready):(t.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))),r.promise(i)},e.ready.promise()});