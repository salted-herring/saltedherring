SVG.Doc=function(e){this.parent=typeof e=="string"?document.getElementById(e):e,this.constructor.call(this,this.parent.nodeName=="svg"?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),this.parent.nodeName!="svg"&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var e,t=this,n=document.createElement("div");return n.style.cssText="position:relative;height:100%;",t.parent.appendChild(n),n.appendChild(t.node),e=function(){document.readyState==="complete"?(t.style("position:absolute;"),setTimeout(function(){t.style("position:relative;overflow:hidden;"),t.parent.removeChild(t.node.parentNode),t.node.parentNode.removeChild(t.node),t.parent.appendChild(t.node),t.fixSubPixelOffset(),SVG.on(window,"resize",function(){t.fixSubPixelOffset()})},5)):setTimeout(e,10)},e(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var e=this.node.getScreenCTM();this.style("left",-e.e%1+"px").style("top",-e.f%1+"px")}});