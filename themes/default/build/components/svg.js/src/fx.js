SVG.FX=function(e){this.target=e},SVG.extend(SVG.FX,{animate:function(e,t,n){var r,i,s,o,u=this.target,a=this;return typeof e=="object"&&(n=e.delay,t=e.ease,e=e.duration),e=e==null?1e3:e,t=t||"<>",a.to=function(e){var n;e=e<0?0:e>1?1:e;if(r==null){r=[];for(o in a.attrs)r.push(o);if(u.morphArray){var f,l=new u.morphArray(a._plot||u.points.toString());a._size&&l.size(a._size.width.to,a._size.height.to),f=l.bbox(),a._x?l.move(a._x.to,f.y):a._cx&&l.move(a._cx.to-f.width/2,f.y),f=l.bbox(),a._y?l.move(f.x,a._y.to):a._cy&&l.move(f.x,a._cy.to-f.height/2),delete a._x,delete a._y,delete a._cx,delete a._cy,delete a._size,a._plot=u.points.morph(l)}}if(i==null){i=[];for(o in a.trans)i.push(o)}if(s==null){s=[];for(o in a.styles)s.push(o)}e=t=="<>"?-Math.cos(e*Math.PI)/2+.5:t==">"?Math.sin(e*Math.PI/2):t=="<"?-Math.cos(e*Math.PI/2)+1:t=="-"?e:typeof t=="function"?t(e):e,a._x?u.x(a._at(a._x,e)):a._cx&&u.cx(a._at(a._cx,e)),a._y?u.y(a._at(a._y,e)):a._cy&&u.cy(a._at(a._cy,e)),a._size&&u.size(a._at(a._size.width,e),a._at(a._size.height,e)),a._plot&&u.plot(a._plot.at(e)),a._viewbox&&u.viewbox(a._at(a._viewbox.x,e),a._at(a._viewbox.y,e),a._at(a._viewbox.width,e),a._at(a._viewbox.height,e));for(n=r.length-1;n>=0;n--)u.attr(r[n],a._at(a.attrs[r[n]],e));for(n=i.length-1;n>=0;n--)u.transform(i[n],a._at(a.trans[i[n]],e));for(n=s.length-1;n>=0;n--)u.style(s[n],a._at(a.styles[s[n]],e));a._during&&a._during.call(u,e,function(t,n){return a._at({from:t,to:n},e)})},typeof e=="number"&&(this.timeout=setTimeout(function(){var t=1e3/60,n=(new Date).getTime(),r=n+e;a.interval=setInterval(function(){var t=(new Date).getTime(),i=t>r?1:(t-n)/e;a.to(i),t>r&&(a._plot&&u.plot((new SVG.PointArray(a._plot.destination)).settle()),clearInterval(a.interval),a._after?a._after.apply(u,[a]):a.stop())},e>t?t:e)},n||0)),this},bbox:function(){return this.target.bbox()},attr:function(e,t,n){if(typeof e=="object")for(var r in e)this.attr(r,e[r]);else this.attrs[e]={from:this.target.attr(e),to:t};return this},transform:function(e,t){if(arguments.length==1){e=this.target._parseMatrix(e),delete e.matrix;for(t in e)this.trans[t]={from:this.target.trans[t],to:e[t]}}else{var n={};n[e]=t,this.transform(n)}return this},style:function(e,t){if(typeof e=="object")for(var n in e)this.style(n,e[n]);else this.styles[e]={from:this.target.style(e),to:t};return this},x:function(e){return this._x={from:this.target.x(),to:e},this},y:function(e){return this._y={from:this.target.y(),to:e},this},cx:function(e){return this._cx={from:this.target.cx(),to:e},this},cy:function(e){return this._cy={from:this.target.cy(),to:e},this},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){if(this.target instanceof SVG.Text)this.attr("font-size",e);else{var n=this.target.bbox();this._size={width:{from:n.width,to:e},height:{from:n.height,to:t}}}return this},plot:function(e){return this._plot=e,this},viewbox:function(e,t,n,r){if(this.target instanceof SVG.Container){var i=this.target.viewbox();this._viewbox={x:{from:i.x,to:e},y:{from:i.y,to:t},width:{from:i.width,to:n},height:{from:i.height,to:r}}}return this},update:function(e){return this.target instanceof SVG.Stop&&(e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new SVG.Number(e.offset))),this},during:function(e){return this._during=e,this},after:function(e){return this._after=e,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._after,delete this._during,delete this._viewbox,this},_at:function(e,t){return typeof e.from=="number"?e.from+(e.to-e.from)*t:SVG.regex.unit.test(e.to)?(new SVG.Number(e.to)).minus(new SVG.Number(e.from)).times(t).plus(new SVG.Number(e.from)):e.to&&(e.to.r||SVG.Color.test(e.to))?this._color(e,t):t<1?e.from:e.to},_color:function(e,t){var n,r;return t=t<0?0:t>1?1:t,n=new SVG.Color(e.from),r=new SVG.Color(e.to),(new SVG.Color({r:~~(n.r+(r.r-n.r)*t),g:~~(n.g+(r.g-n.g)*t),b:~~(n.b+(r.b-n.b)*t)})).toHex()}}),SVG.extend(SVG.Element,{animate:function(e,t,n){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(e,t,n)},stop:function(){return this.fx&&this.fx.stop(),this}});