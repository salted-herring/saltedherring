/*! svg.js v2.6.5 MIT*/

!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e,e.document)}):"object"==typeof exports?module.exports=e.document?t(e,e.document):function(e){return t(e,e.document)}:e.SVG=t(e,e.document)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t,n,r){return n+r.replace(w.regex.dots," .")}function r(e){for(var t=e.slice(0),n=t.length;n--;)Array.isArray(t[n])&&(t[n]=r(t[n]));return t}function i(e,t){return e instanceof t}function s(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return 4==e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function f(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function l(e,t,n){if(null==t||null==n){var r=e.bbox();null==t?t=r.width/r.height*n:null==n&&(n=r.height/r.width*t)}return{width:t,height:n}}function c(e,t,n){return{x:t*e.a+n*e.c+0,y:t*e.b+n*e.d+0}}function h(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function p(e){return e instanceof w.Matrix||(e=new w.Matrix(e)),e}function d(e,t){e.cx=null==e.cx?t.bbox().cx:e.cx,e.cy=null==e.cy?t.bbox().cy:e.cy}function v(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t][0],null!=e[t][1]&&(r+=e[t][1],null!=e[t][2]&&(r+=" ",r+=e[t][2],null!=e[t][3]&&(r+=" ",r+=e[t][3],r+=" ",r+=e[t][4],null!=e[t][5]&&(r+=" ",r+=e[t][5],r+=" ",r+=e[t][6],null!=e[t][7]&&(r+=" ",r+=e[t][7])))));return r+" "}function m(t){for(var n=t.childNodes.length-1;n>=0;n--)t.childNodes[n]instanceof e.SVGElement&&m(t.childNodes[n]);return w.adopt(t).id(w.eid(t.nodeName))}function g(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function y(e){var t=(e||"").toString().match(w.regex.reference);if(t)return t[1]}function b(e){return Math.abs(e)>1e-37?e:0}var w=this.SVG=function(e){if(w.supported)return e=new w.Doc(e),w.parser.draw||w.prepare(),e};if(w.ns="http://www.w3.org/2000/svg",w.xmlns="http://www.w3.org/2000/xmlns/",w.xlink="http://www.w3.org/1999/xlink",w.svgjs="http://svgjs.com/svgjs",w.supported=function(){return!!t.createElementNS&&!!t.createElementNS(w.ns,"svg").createSVGRect}(),!w.supported)return!1;w.did=1e3,w.eid=function(e){return"Svgjs"+u(e)+w.did++},w.create=function(e){var n=t.createElementNS(this.ns,e);return n.setAttribute("id",this.eid(e)),n},w.extend=function(){var e,t,n,r;for(e=[].slice.call(arguments),t=e.pop(),r=e.length-1;r>=0;r--)if(e[r])for(n in t)e[r].prototype[n]=t[n];w.Set&&w.Set.inherit&&w.Set.inherit()},w.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,w.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&w.extend(t,e.extend),e.construct&&w.extend(e.parent||w.Container,e.construct),t},w.adopt=function(t){if(!t)return null;if(t.instance)return t.instance;var n;return n="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new w.Nested:new w.Doc:"linearGradient"==t.nodeName?new w.Gradient("linear"):"radialGradient"==t.nodeName?new w.Gradient("radial"):w[u(t.nodeName)]?new(w[u(t.nodeName)]):new w.Element(t),n.type=t.nodeName,n.node=t,t.instance=n,n instanceof w.Doc&&n.namespace().defs(),n.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),n},w.prepare=function(){var e=t.getElementsByTagName("body")[0],n=(e?new w.Doc(e):w.adopt(t.documentElement).nested()).size(2,0);w.parser={body:e||t.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:n.polyline().node,path:n.path().node,"native":w.create("svg")}},w.parser={"native":w.create("svg")},t.addEventListener("DOMContentLoaded",function(){w.parser.draw||w.prepare()},!1),w.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},w.utils={map:function(e,t){var n,r=e.length,i=[];for(n=0;n<r;n++)i.push(t(e[n]));return i},filter:function(e,t){var n,r=e.length,i=[];for(n=0;n<r;n++)t(e[n])&&i.push(e[n]);return i},radians:function(e){return e%360*Math.PI/180},degrees:function(e){return 180*e/Math.PI%360},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof e.SVGElement})}},w.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},w.Color=function(e){var t;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?w.regex.isRgb.test(e)?(t=w.regex.rgb.exec(e.replace(w.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):w.regex.isHex.test(e)&&(t=w.regex.hex.exec(a(e)),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"==typeof e&&(this.r=e.r,this.g=e.g,this.b=e.b))},w.extend(w.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+f(this.r)+f(this.g)+f(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new w.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new w.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),w.Color.test=function(e){return e+="",w.regex.isHex.test(e)||w.regex.isRgb.test(e)},w.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},w.Color.isColor=function(e){return w.Color.isRgb(e)||w.Color.test(e)},w.Array=function(e,t){e=(e||[]).valueOf(),0==e.length&&t&&(e=t.valueOf()),this.value=this.parse(e)},w.extend(w.Array,{morph:function(e){if(this.destination=this.parse(e),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(t)}return this},settle:function(){for(var e=0,t=this.value.length,n=[];e<t;e++)-1==n.indexOf(this.value[e])&&n.push(this.value[e]);return this.value=n},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,r=[];t<n;t++)r.push(this.value[t]+(this.destination[t]-this.value[t])*e);return new w.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)},split:function(e){return e.trim().split(w.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var e=new this.constructor;return e.value=r(this.value),e}}),w.PointArray=function(e,t){w.Array.call(this,e,t||[[0,0]])},w.PointArray.prototype=new w.Array,w.PointArray.prototype.constructor=w.PointArray,w.extend(w.PointArray,{toString:function(){for(var e=0,t=this.value.length,n=[];e<t;e++)n.push(this.value[e].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,r=[];t<n;t++)r.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*e,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*e]);return new w.PointArray(r)},parse:function(e){var t=[];if(e=e.valueOf(),Array.isArray(e)){if(Array.isArray(e[0]))return e.map(function(e){return e.slice()});if(null!=e[0].x)return e.map(function(e){return[e.x,e.y]})}else e=e.trim().split(w.regex.delimiter).map(parseFloat);e.length%2!=0&&e.pop();for(var n=0,r=e.length;n<r;n+=2)t.push([e[n],e[n+1]]);return t},move:function(e,t){var n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(var r=this.value.length-1;r>=0;r--)this.value[r]=[this.value[r][0]+e,this.value[r][1]+t];return this},size:function(e,t){var n,r=this.bbox();for(n=this.value.length-1;n>=0;n--)r.width&&(this.value[n][0]=(this.value[n][0]-r.x)*e/r.width+r.x),r.height&&(this.value[n][1]=(this.value[n][1]-r.y)*t/r.height+r.y);return this},bbox:function(){return w.parser.poly.setAttribute("points",this.toString()),w.parser.poly.getBBox()}});for(var E={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},S="mlhvqtcsaz".split(""),x=0,T=S.length;x<T;++x)E[S[x]]=function(e){return function(t,n,r){if("H"==e)t[0]=t[0]+n.x;else if("V"==e)t[0]=t[0]+n.y;else if("A"==e)t[5]=t[5]+n.x,t[6]=t[6]+n.y;else for(var i=0,s=t.length;i<s;++i)t[i]=t[i]+(i%2?n.y:n.x);return E[e](t,n,r)}}(S[x].toUpperCase());w.PathArray=function(e,t){w.Array.call(this,e,t||[["M",0,0]])},w.PathArray.prototype=new w.Array,w.PathArray.prototype.constructor=w.PathArray,w.extend(w.PathArray,{toString:function(){return v(this.value)},move:function(e,t){var n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(var r,i=this.value.length-1;i>=0;i--)r=this.value[i][0],"M"==r||"L"==r||"T"==r?(this.value[i][1]+=e,this.value[i][2]+=t):"H"==r?this.value[i][1]+=e:"V"==r?this.value[i][1]+=t:"C"==r||"S"==r||"Q"==r?(this.value[i][1]+=e,this.value[i][2]+=t,this.value[i][3]+=e,this.value[i][4]+=t,"C"==r&&(this.value[i][5]+=e,this.value[i][6]+=t)):"A"==r&&(this.value[i][6]+=e,this.value[i][7]+=t);return this},size:function(e,t){var n,r,i=this.bbox();for(n=this.value.length-1;n>=0;n--)r=this.value[n][0],"M"==r||"L"==r||"T"==r?(this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*t/i.height+i.y):"H"==r?this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x:"V"==r?this.value[n][1]=(this.value[n][1]-i.y)*t/i.height+i.y:"C"==r||"S"==r||"Q"==r?(this.value[n][1]=(this.value[n][1]-i.x)*e/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*t/i.height+i.y,this.value[n][3]=(this.value[n][3]-i.x)*e/i.width+i.x,this.value[n][4]=(this.value[n][4]-i.y)*t/i.height+i.y,"C"==r&&(this.value[n][5]=(this.value[n][5]-i.x)*e/i.width+i.x,this.value[n][6]=(this.value[n][6]-i.y)*t/i.height+i.y)):"A"==r&&(this.value[n][1]=this.value[n][1]*e/i.width,this.value[n][2]=this.value[n][2]*t/i.height,this.value[n][6]=(this.value[n][6]-i.x)*e/i.width+i.x,this.value[n][7]=(this.value[n][7]-i.y)*t/i.height+i.y);return this},equalCommands:function(e){var t,n,r;for(e=new w.PathArray(e),r=this.value.length===e.value.length,t=0,n=this.value.length;r&&t<n;t++)r=this.value[t][0]===e.value[t][0];return r},morph:function(e){return e=new w.PathArray(e),this.equalCommands(e)?this.destination=e:this.destination=null,this},at:function(e){if(!this.destination)return this;var t,n,r,i,s=this.value,o=this.destination.value,u=[],a=new w.PathArray;for(t=0,n=s.length;t<n;t++){for(u[t]=[s[t][0]],r=1,i=s[t].length;r<i;r++)u[t][r]=s[t][r]+(o[t][r]-s[t][r])*e;"A"===u[t][0]&&(u[t][4]=+(0!=u[t][4]),u[t][5]=+(0!=u[t][5]))}return a.value=u,a},parse:function(e){if(e instanceof w.PathArray)return e.valueOf();var t,r,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(w.regex.numbersWithDots,n).replace(w.regex.pathLetters," $& ").replace(w.regex.hyphen,"$1 -").trim().split(w.regex.delimiter):e.reduce(function(e,t){return[].concat.call(e,t)},[]);var r=[],s=new w.Point,o=new w.Point,u=0,a=e.length;do w.regex.isPathLetter.test(e[u])?(t=e[u],++u):"M"==t?t="L":"m"==t&&(t="l"),r.push(E[t].call(null,e.slice(u,u+=i[t.toUpperCase()]).map(parseFloat),s,o));while(a>u);return r},bbox:function(){return w.parser.path.setAttribute("d",this.toString()),w.parser.path.getBBox()}}),w.Number=w.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-3.4e38:3.4e38:"string"==typeof e?(t=e.match(w.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof w.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new w.Number(e),new w.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new w.Number(e),new w.Number(this-e,this.unit||e.unit)},times:function(e){return e=new w.Number(e),new w.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new w.Number(e),new w.Number(this/e,this.unit||e.unit)},to:function(e){var t=new w.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new w.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?(new w.Number(this.destination)).minus(this).times(e).plus(this):this}}}),w.Element=w.invent({create:function(e){this._stroke=w.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var n=l(this,e,t);return this.width(new w.Number(n.width)).height(new w.Number(n.height))},clone:function(e){this.writeDataToDom();var t=m(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},inside:function(e,t){var n=this.bbox();return e>n.x&&t>n.y&&e<n.x+n.width&&t<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(w.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!=e}).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return w.get(this.attr(e))},parent:function(t){var n=this;if(!n.node.parentNode)return null;if(n=w.adopt(n.node.parentNode),!t)return n;for(;n&&n.node instanceof e.SVGElement;){if("string"==typeof t?n.matches(t):n instanceof t)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName)return null;n=w.adopt(n.node.parentNode)}},doc:function(){return this instanceof w.Doc?this:this.parent(w.Doc)},parents:function(e){var t=[],n=this;do{if(!(n=n.parent(e))||!n.node)break;t.push(n)}while(n.parent);return t},matches:function(e){return s(this.node,e)},"native":function(){return this.node},svg:function(e){var n=t.createElement("svg");if(!(e&&this instanceof w.Parent))return n.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,i=n.firstChild.childNodes.length;r<i;r++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return i(this,e)}}}),w.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},w.morph=function(e){return function(t,n){return(new w.MorphObj(t,n)).at(e)}},w.Situation=w.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=(new w.Number(e.duration)).valueOf(),this.delay=(new w.Number(e.delay)).valueOf(),this.start=+(new Date)+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),w.FX=w.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,n){"object"==typeof e&&(t=e.ease,n=e.delay,e=e.duration);var r=new w.Situation({duration:e||1e3,delay:n||0,ease:w.easing[t||"-"]||t});return this.queue(r),this},delay:function(e){var t=new w.Situation({duration:e,delay:0,ease:w.easing["-"]});return this.queue(t)},target:function(e){return e&&e instanceof w.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+(new Date)+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof w.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof w.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t,n,r=this.situation;if(r.init)return this;for(e in r.animations)for(n=this.target()[e](),Array.isArray(n)||(n=[n]),Array.isArray(r.animations[e])||(r.animations[e]=[r.animations[e]]),t=n.length;t--;)r.animations[e][t]instanceof w.Number&&(n[t]=new w.Number(n[t])),r.animations[e][t]=n[t].morph(r.animations[e][t]);for(e in r.attrs)r.attrs[e]=new w.MorphObj(this.target().attr(e),r.attrs[e]);for(e in r.styles)r.styles[e]=new w.MorphObj(this.target().style(e),r.styles[e]);return r.initialTransformation=this.target().matrixify(),r.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var n=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var e=this.situation;this.stop(),this.situation=e,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(e,t){var n=this.situation.duration/this._speed;return this.absPos=e,t||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+(new Date)-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(e){return 0===e?this.pause():e?(this._speed=e,this.at(this.absPos,!0)):this._speed},loop:function(e,t){var n=this.last();return n.loops=null==e||e,n.loop=0,t&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(e){var t=this.last();return t.reversed=void 0===e?!t.reversed:e,this},progress:function(e){return e?this.situation.ease(this.pos):this.pos},after:function(e){var t=this.last(),n=function r(n){n.detail.situation==t&&(e.call(this,t),this.off("finished.fx",r))};return this.target().on("finished.fx",n),this._callStart()},during:function(e){var t=this.last(),n=function(n){n.detail.situation==t&&e.call(this,n.detail.pos,w.morph(n.detail.pos),n.detail.eased,t)};return this.target().off("during.fx",n).on("during.fx",n),this.after(function(){this.off("during.fx",n)}),this._callStart()},afterAll:function(e){var t=function n(t){e.call(this),this.off("allfinished.fx",n)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},duringAll:function(e){var t=function(t){e.call(this,t.detail.pos,w.morph(t.detail.pos),t.detail.eased,t.detail.situation)};return this.target().off("during.fx",t).on("during.fx",t),this.afterAll(function(){this.off("during.fx",t)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,n){return this.last()[n||"animations"][e]=t,this._callStart()},step:function(e){if(e||(this.absPos=this.timeToAbsPos(+(new Date))),!1!==this.situation.loops){var t,n,r;t=Math.max(this.absPos,0),n=Math.floor(t),!0===this.situation.loops||n<this.situation.loops?(this.pos=t-n,r=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,r=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-r)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var i=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=i&&(this.situation.once[s].call(this.target(),this.pos,i),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:i,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=i,this):this},eachAt:function(){var e,t,n,r=this,i=this.target(),s=this.situation;for(e in s.animations)n=[].concat(s.animations[e]).map(function(e){return"string"!=typeof e&&e.at?e.at(s.ease(r.pos),r.pos):e}),i[e].apply(i,n);for(e in s.attrs)n=[e].concat(s.attrs[e]).map(function(e){return"string"!=typeof e&&e.at?e.at(s.ease(r.pos),r.pos):e}),i.attr.apply(i,n);for(e in s.styles)n=[e].concat(s.styles[e]).map(function(e){return"string"!=typeof e&&e.at?e.at(s.ease(r.pos),r.pos):e}),i.style.apply(i,n);if(s.transforms.length){for(n=s.initialTransformation,e=0,t=s.transforms.length;e<t;e++){var o=s.transforms[e];o instanceof w.Matrix?n=o.relative?n.multiply((new w.Matrix).morph(o).at(s.ease(this.pos))):n.morph(o).at(s.ease(this.pos)):(o.relative||o.undo(n.extract()),n=n.multiply(o.at(s.ease(this.pos))))}i.matrix(n)}return this},once:function(e,t,n){var r=this.last();return n||(e=r.ease(e)),r.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:w.Element,construct:{animate:function(e,t,n){return(this.fx||(this.fx=new w.FX(this))).animate(e,t,n)},delay:function(e){return(this.fx||(this.fx=new w.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(e){if(this.fx){if(null==e)return this.fx.speed();this.fx.speed(e)}return this}}}),w.MorphObj=w.invent({create:function(e,t){return w.Color.isColor(t)?(new w.Color(e)).morph(t):w.regex.delimiter.test(e)?w.regex.pathLetters.test(e)?(new w.PathArray(e)).morph(t):(new w.Array(e)).morph(t):w.regex.numberAndUnit.test(t)?(new w.Number(e)).morph(t):(this.value=e,void (this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),w.extend(w.FX,{attr:function(e,t,n){if("object"==typeof e)for(var r in e)this.attr(r,e[r]);else this.add(e,t,"attrs");return this},style:function(e,t){if("object"==typeof e)for(var n in e)this.style(n,e[n]);else this.add(e,t,"styles");return this},x:function(e,t){if(this.target()instanceof w.G)return this.transform({x:e},t),this;var n=new w.Number(e);return n.relative=t,this.add("x",n)},y:function(e,t){if(this.target()instanceof w.G)return this.transform({y:e},t),this;var n=new w.Number(e);return n.relative=t,this.add("y",n)},cx:function(e){return this.add("cx",new w.Number(e))},cy:function(e){return this.add("cy",new w.Number(e))},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){if(this.target()instanceof w.Text)this.attr("font-size",e);else{var n;e&&t||(n=this.target().bbox()),e||(e=n.width/n.height*t),t||(t=n.height/n.width*e),this.add("width",new w.Number(e)).add("height",new w.Number(t))}return this},width:function(e){return this.add("width",new w.Number(e))},height:function(e){return this.add("height",new w.Number(e))},plot:function(e,t,n,r){return 4==arguments.length?this.plot([e,t,n,r]):this.add("plot",new(this.target().morphArray)(e))},leading:function(e){return this.target().leading?this.add("leading",new w.Number(e)):this},viewbox:function(e,t,n,r){return this.target()instanceof w.Container&&this.add("viewbox",new w.ViewBox(e,t,n,r)),this},update:function(e){if(this.target()instanceof w.Stop){if("number"==typeof e||e instanceof w.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",e.offset)}return this}}),w.Box=w.invent({create:function(e,t,n,r){if(!("object"!=typeof e||e instanceof w.Element))return w.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=n,this.height=r),g(this)},extend:{merge:function(e){var t=new this.constructor;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,g(t)},transform:function(e){var t,n=1/0,r=-1/0,i=1/0,s=-1/0;return[new w.Point(this.x,this.y),new w.Point(this.x2,this.y),new w.Point(this.x,this.y2),new w.Point(this.x2,this.y2)].forEach(function(t){t=t.transform(e),n=Math.min(n,t.x),r=Math.max(r,t.x),i=Math.min(i,t.y),s=Math.max(s,t.y)}),t=new this.constructor,t.x=n,t.width=r-n,t.y=i,t.height=s-i,g(t),t}}}),w.BBox=w.invent({create:function(e){if(w.Box.apply(this,[].slice.call(arguments)),e instanceof w.Element){var t;try{if(r.documentElement.contains){if(!r.documentElement.contains(e.node))throw new Exception("Element not in the dom")}else{for(var n=e.node;n.parentNode;)n=n.parentNode;if(n!=r)throw new Exception("Element not in the dom")}t=e.node.getBBox()}catch(r){if(e instanceof w.Shape){var i=e.clone(w.parser.draw.instance).show();t=i.node.getBBox(),i.remove()}else t={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}w.Box.call(this,t)}},inherit:w.Box,parent:w.Element,construct:{bbox:function(){return new w.BBox(this)}}}),w.BBox.prototype.constructor=w.BBox,w.extend(w.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),w.RBox=w.invent({create:function(e){w.Box.apply(this,[].slice.call(arguments)),e instanceof w.Element&&w.Box.call(this,e.node.getBoundingClientRect())},inherit:w.Box,parent:w.Element,extend:{addOffset:function(){return this.x+=e.pageXOffset,this.y+=e.pageYOffset,this}},construct:{rbox:function(e){return e?(new w.RBox(this)).transform(e.screenCTM().inverse()):(new w.RBox(this)).addOffset()}}}),w.RBox.prototype.constructor=w.RBox,w.Matrix=w.invent({create:function(e){var t,n=h([1,0,0,1,0,0]);for(e=e instanceof w.Element?e.matrixify():"string"==typeof e?h(e.split(w.regex.delimiter).map(parseFloat)):6==arguments.length?h([].slice.call(arguments)):Array.isArray(e)?h(e):"object"==typeof e?e:n,t=C.length-1;t>=0;--t)this[C[t]]=null!=e[C[t]]?e[C[t]]:n[C[t]]},extend:{extract:function(){var e=c(this,0,1),t=c(this,1,0),n=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(t.y,t.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new w.Matrix(this)}},clone:function(){return new w.Matrix(this)},morph:function(e){return this.destination=new w.Matrix(e),this},at:function(e){return this.destination?new w.Matrix({a:this.a+(this.destination.a-this.a)*e,b:this.b+(this.destination.b-this.b)*e,c:this.c+(this.destination.c-this.c)*e,d:this.d+(this.destination.d-this.d)*e,e:this.e+(this.destination.e-this.e)*e,f:this.f+(this.destination.f-this.f)*e}):this},multiply:function(e){return new w.Matrix(this.native().multiply(p(e).native()))},inverse:function(){return new w.Matrix(this.native().inverse())},translate:function(e,t){return new w.Matrix(this.native().translate(e||0,t||0))},scale:function(e,t,n,r){return 1==arguments.length?t=e:3==arguments.length&&(r=n,n=t,t=e),this.around(n,r,new w.Matrix(e,0,0,t,0,0))},rotate:function(e,t,n){return e=w.utils.radians(e),this.around(t,n,new w.Matrix(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0))},flip:function(e,t){return"x"==e?this.scale(-1,1,t,0):"y"==e?this.scale(1,-1,0,t):this.scale(-1,-1,e,null!=t?t:e)},skew:function(e,t,n,r){return 1==arguments.length?t=e:3==arguments.length&&(r=n,n=t,t=e),e=w.utils.radians(e),t=w.utils.radians(t),this.around(n,r,new w.Matrix(1,Math.tan(t),Math.tan(e),1,0,0))},skewX:function(e,t,n){return this.skew(e,0,t,n)},skewY:function(e,t,n){return this.skew(0,e,t,n)},around:function(e,t,n){return this.multiply(new w.Matrix(1,0,0,1,e||0,t||0)).multiply(n).multiply(new w.Matrix(1,0,0,1,-e||0,-t||0))},"native":function(){for(var e=w.parser.native.createSVGMatrix(),t=C.length-1;t>=0;t--)e[C[t]]=this[C[t]];return e},toString:function(){return"matrix("+b(this.a)+","+b(this.b)+","+b(this.c)+","+b(this.d)+","+b(this.e)+","+b(this.f)+")"}},parent:w.Element,construct:{ctm:function(){return new w.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof w.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new w.Matrix(t)}return new w.Matrix(this.node.getScreenCTM())}}}),w.Point=w.invent({create:function(e,t){var n,r={x:0,y:0};n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"==typeof e?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:r,this.x=n.x,this.y=n.y},extend:{clone:function(){return new w.Point(this)},morph:function(e,t){return this.destination=new w.Point(e,t),this},at:function(e){return this.destination?new w.Point({x:this.x+(this.destination.x-this.x)*e,y:this.y+(this.destination.y-this.y)*e}):this},"native":function(){var e=w.parser.native.createSVGPoint();return e.x=this.x,e.y=this.y,e},transform:function(e){return new w.Point(this.native().matrixTransform(e.native()))}}}),w.extend(w.Element,{point:function(e,t){return(new w.Point(e,t)).transform(this.screenCTM().inverse())}}),w.extend(w.Element,{attr:function(e,t,n){if(null==e){for(e={},t=this.node.attributes,n=t.length-1;n>=0;n--)e[t[n].nodeName]=w.regex.isNumber.test(t[n].nodeValue)?parseFloat(t[n].nodeValue):t[n].nodeValue;return e}if("object"==typeof e)for(t in e)this.attr(t,e[t]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return t=this.node.getAttribute(e),null==t?w.defaults.attrs[e]:w.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(w.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof w.Image&&(t=this.doc().defs().pattern(0,0,function(){this.add(t)}))),"number"==typeof t?t=new w.Number(t):w.Color.isColor(t)?t=new w.Color(t):Array.isArray(t)&&(t=new w.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof n?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),w.extend(w.Element,{transform:function(e,t){var n,r,i=this;if("object"!=typeof e)return n=(new w.Matrix(i)).extract(),"string"==typeof e?n[e]:n;if(n=new w.Matrix(i),t=!!t||!!e.relative,null!=e.a)n=t?n.multiply(new w.Matrix(e)):new w.Matrix(e);else if(null!=e.rotation)d(e,i),n=t?n.rotate(e.rotation,e.cx,e.cy):n.rotate(e.rotation-n.extract().rotation,e.cx,e.cy);else if(null!=e.scale||null!=e.scaleX||null!=e.scaleY){if(d(e,i),e.scaleX=null!=e.scale?e.scale:null!=e.scaleX?e.scaleX:1,e.scaleY=null!=e.scale?e.scale:null!=e.scaleY?e.scaleY:1,!t){var s=n.extract();e.scaleX=1*e.scaleX/s.scaleX,e.scaleY=1*e.scaleY/s.scaleY}n=n.scale(e.scaleX,e.scaleY,e.cx,e.cy)}else if(null!=e.skew||null!=e.skewX||null!=e.skewY){if(d(e,i),e.skewX=null!=e.skew?e.skew:null!=e.skewX?e.skewX:0,e.skewY=null!=e.skew?e.skew:null!=e.skewY?e.skewY:0,!t){var s=n.extract();n=n.multiply((new w.Matrix).skew(s.skewX,s.skewY,e.cx,e.cy).inverse())}n=n.skew(e.skewX,e.skewY,e.cx,e.cy)}else e.flip?("x"==e.flip||"y"==e.flip?e.offset=null==e.offset?i.bbox()["c"+e.flip]:e.offset:null==e.offset?(r=i.bbox(),e.flip=r.cx,e.offset=r.cy):e.flip=e.offset,n=(new w.Matrix).flip(e.flip,e.offset)):null==e.x&&null==e.y||(t?n=n.translate(e.x,e.y):(null!=e.x&&(n.e=e.x),null!=e.y&&(n.f=e.y)));return this.attr("transform",n)}}),w.extend(w.FX,{transform:function(e,t){var n,r,i=this.target();return"object"!=typeof e?(n=(new w.Matrix(i)).extract(),"string"==typeof e?n[e]:n):(t=!!t||!!e.relative,null!=e.a?n=new w.Matrix(e):null!=e.rotation?(d(e,i),n=new w.Rotate(e.rotation,e.cx,e.cy)):null!=e.scale||null!=e.scaleX||null!=e.scaleY?(d(e,i),e.scaleX=null!=e.scale?e.scale:null!=e.scaleX?e.scaleX:1,e.scaleY=null!=e.scale?e.scale:null!=e.scaleY?e.scaleY:1,n=new w.Scale(e.scaleX,e.scaleY,e.cx,e.cy)):null!=e.skewX||null!=e.skewY?(d(e,i),e.skewX=null!=e.skewX?e.skewX:0,e.skewY=null!=e.skewY?e.skewY:0,n=new w.Skew(e.skewX,e.skewY,e.cx,e.cy)):e.flip?("x"==e.flip||"y"==e.flip?e.offset=null==e.offset?i.bbox()["c"+e.flip]:e.offset:null==e.offset?(r=i.bbox(),e.flip=r.cx,e.offset=r.cy):e.flip=e.offset,n=(new w.Matrix).flip(e.flip,e.offset)):null==e.x&&null==e.y||(n=new w.Translate(e.x,e.y)),n?(n.relative=t,this.last().transforms.push(n),this._callStart()):this)}}),w.extend(w.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(w.regex.transforms).slice(0,-1).map(function(e){var t=e.trim().split("(");return[t[0],t[1].split(w.regex.delimiter).map(function(e){return parseFloat(e)})]}).reduce(function(e,t){return"matrix"==t[0]?e.multiply(h(t[1])):e[t[0]].apply(e,t[1])},new w.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),n=e.screenCTM().inverse();return this.addTo(e).untransform().transform(n.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),w.Transformation=w.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[n];else if("object"==typeof e)for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===t&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(e){for(var t=[],n=0,r=this.arguments.length;n<r;++n)t.push(this[this.arguments[n]]);var i=this._undo||new w.Matrix;return i=(new w.Matrix).morph(w.Matrix.prototype[this.method].apply(i,t)).at(e),this.inversed?i.inverse():i},undo:function(e){for(var t=0,n=this.arguments.length;t<n;++t)e[this.arguments[t]]=void 0===this[this.arguments[t]]?0:e[this.arguments[t]];return e.cx=this.cx,e.cy=this.cy,this._undo=(new(w[u(this.method)])(e,!0)).at(1),this}}}),w.Translate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),w.Rotate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(e){var t=(new w.Matrix).rotate((new w.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(e),this.cx,this.cy);return this.inversed?t.inverse():t},undo:function(e){return this._undo=e,this}}}),w.Scale=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),w.Skew=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),w.extend(w.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof e)for(t in e)this.style(t,e[t]);else{if(!w.regex.isCss.test(e))return this.node.style[o(e)];for(e=e.split(/\s*;\s*/).filter(function(e){return!!e}).map(function(e){return e.split(/\s*:\s*/)});t=e.pop();)this.style(t[0],t[1])}else this.node.style[o(e)]=null===t||w.regex.isBlank.test(t)?"":t;return this}}),w.Parent=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Element,extend:{children:function(){return w.utils.map(w.utils.filterSVGElements(this.node.childNodes),function(e){return w.adopt(e)})},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return w.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)i[n]instanceof w.Element&&e.apply(i[n],[n,i]),t&&i[n]instanceof w.Container&&i[n].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),w.extend(w.Parent,{ungroup:function(e,t){return 0===t||this instanceof w.Defs||this.node==w.parser.draw?this:(e=e||(this instanceof w.Doc?this:this.parent(w.Parent)),t=t||1/0,this.each(function(){return this instanceof w.Defs?this:this instanceof w.Parent?this.ungroup(e,t-1):this.toParent(e)}),this.node.firstChild||this.remove(),this)},flatten:function(e,t){return this.ungroup(e,t)}}),w.Container=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Parent}),w.ViewBox=w.invent({create:function(e){var t,n,r,i,s,o,u,a=[0,0,0,0],f=1,l=1,c=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(e instanceof w.Element){for(o=e,u=e,s=(e.attr("viewBox")||"").match(c),e.bbox,r=new w.Number(e.width()),i=new w.Number(e.height());"%"==r.unit;)f*=r.value,r=new w.Number(o instanceof w.Doc?o.parent().offsetWidth:o.parent().width()),o=o.parent();for(;"%"==i.unit;)l*=i.value,i=new w.Number(u instanceof w.Doc?u.parent().offsetHeight:u.parent().height()),u=u.parent();this.x=0,this.y=0,this.width=r*f,this.height=i*l,this.zoom=1,s&&(t=parseFloat(s[0]),n=parseFloat(s[1]),r=parseFloat(s[2]),i=parseFloat(s[3]),this.zoom=this.width/this.height>r/i?this.height/i:this.width/r,this.x=t,this.y=n,this.width=r,this.height=i)}else e="string"==typeof e?e.match(c).map(function(e){return parseFloat(e)}):Array.isArray(e)?e:"object"==typeof e?[e.x,e.y,e.width,e.height]:4==arguments.length?[].slice.call(arguments):a,this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(e,t,n,r){return this.destination=new w.ViewBox(e,t,n,r),this},at:function(e){return this.destination?new w.ViewBox([this.x+(this.destination.x-this.x)*e,this.y+(this.destination.y-this.y)*e,this.width+(this.destination.width-this.width)*e,this.height+(this.destination.height-this.height)*e]):this}},parent:w.Container,construct:{viewbox:function(e,t,n,r){return 0==arguments.length?new w.ViewBox(this):this.attr("viewBox",new w.ViewBox(e,t,n,r))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(e){w.Element.prototype[e]=function(t){return w.on(this.node,e,t),this}}),w.listeners=[],w.handlerMap=[],w.listenerId=0,w.on=function(e,t,n,r,i){var s=n.bind(r||e.instance||e),o=(w.handlerMap.indexOf(e)+1||w.handlerMap.push(e))-1,u=t.split(".")[0],a=t.split(".")[1]||"*";w.listeners[o]=w.listeners[o]||{},w.listeners[o][u]=w.listeners[o][u]||{},w.listeners[o][u][a]=w.listeners[o][u][a]||{},n._svgjsListenerId||(n._svgjsListenerId=++w.listenerId),w.listeners[o][u][a][n._svgjsListenerId]=s,e.addEventListener(u,s,i||!1)},w.off=function(e,t,n){var r=w.handlerMap.indexOf(e),i=t&&t.split(".")[0],s=t&&t.split(".")[1],o="";if(-1!=r)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;w.listeners[r][i]&&w.listeners[r][i][s||"*"]&&(e.removeEventListener(i,w.listeners[r][i][s||"*"][n],!1),delete w.listeners[r][i][s||"*"][n])}else if(s&&i){if(w.listeners[r][i]&&w.listeners[r][i][s]){for(n in w.listeners[r][i][s])w.off(e,[i,s].join("."),n);delete w.listeners[r][i][s]}}else if(s)for(t in w.listeners[r])for(o in w.listeners[r][t])s===o&&w.off(e,[t,s].join("."));else if(i){if(w.listeners[r][i]){for(o in w.listeners[r][i])w.off(e,[i,o].join("."));delete w.listeners[r][i]}}else{for(t in w.listeners[r])w.off(e,t);delete w.listeners[r],delete w.handlerMap[r]}},w.extend(w.Element,{on:function(e,t,n,r){return w.on(this.node,e,t,n,r),this},off:function(e,t){return w.off(this.node,e,t),this},fire:function(t,n){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new w.CustomEvent(t,{detail:n,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),w.Defs=w.invent({create:"defs",inherit:w.Container}),w.G=w.invent({create:"g",inherit:w.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)},y:function(e){return null==e?this.transform("y"):this.transform({y:e-this.y()},!0)},cx:function(e){return null==e?this.gbox().cx:this.x(e-this.gbox().width/2)},cy:function(e){return null==e?this.gbox().cy:this.y(e-this.gbox().height/2)},gbox:function(){var e=this.bbox(),t=this.transform();return e.x+=t.x,e.x2+=t.x,e.cx+=t.x,e.y+=t.y,e.y2+=t.y,e.cy+=t.y,e}},construct:{group:function(){return this.put(new w.G)}}}),w.Doc=w.invent({create:function(e){e&&(e="string"==typeof e?t.getElementById(e):e,"svg"==e.nodeName?this.constructor.call(this,e):(this.constructor.call(this,w.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:w.Container,extend:{namespace:function(){return this.attr({xmlns:w.ns,version:"1.1"}).attr("xmlns:xlink",w.xlink,w.xmlns).attr("xmlns:svgjs",w.svgjs,w.xmlns)},defs:function(){if(!this._defs){var e;(e=this.node.getElementsByTagName("defs")[0])?this._defs=w.adopt(e):this._defs=new w.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var e=this.node.getScreenCTM();return e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,w.parser.draw.parentNode||this.node.appendChild(w.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,n=m(t.cloneNode(!0));return e?(e.node||e).appendChild(n.node):t.parentNode.insertBefore(n.node,t.nextSibling),n}}}),w.extend(w.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var e=this.position()+1,t=this.parent();return t.removeElement(this).add(this,e),t instanceof w.Doc&&t.node.appendChild(t.defs().node),this},backward:function(){var e=this.position();return e>0&&this.parent().removeElement(this).add(this,e-1),this},front:function(){var e=this.parent();return e.node.appendChild(this.node),e instanceof w.Doc&&e.node.appendChild(e.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(e){e.remove();var t=this.position();return this.parent().add(e,t),this},after:function(e){e.remove();var t=this.position();return this.parent().add(e,t+1),this}}),w.Mask=w.invent({create:function(){this.constructor.call(this,w.create("mask")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unmask();return this.targets=[],w.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new w.Mask)}}}),w.extend(w.Element,{maskWith:function(e){return this.masker=e instanceof w.Mask?e:this.parent().mask().add(e),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),w.ClipPath=w.invent({create:function(){this.constructor.call(this,w.create("clipPath")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new w.ClipPath)}}}),w.extend(w.Element,{clipWith:function(e){return this.clipper=e instanceof w.ClipPath?e:this.parent().clip().add(e),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),w.Gradient=w.invent({create:function(e){this.constructor.call(this,w.create(e+"Gradient")),this.type=e},inherit:w.Container,extend:{at:function(e,t,n){return this.put(new w.Stop).update(e,t,n)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,n){return"transform"==e&&(e="gradientTransform"),w.Container.prototype.attr.call(this,e,t,n)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),w.extend(w.Gradient,w.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new w.Number(e),fy:new w.Number(t)}):this.attr({x1:new w.Number(e),y1:new w.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new w.Number(e),cy:new w.Number(t)}):this.attr({x2:new w.Number(e),y2:new w.Number(t)})}}),w.extend(w.Defs,{gradient:function(e,t){return this.put(new w.Gradient(e)).update(t)}}),w.Stop=w.invent({create:"stop",inherit:w.Element,extend:{update:function(e){return("number"==typeof e||e instanceof w.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new w.Number(e.offset)),this}}}),w.Pattern=w.invent({create:"pattern",inherit:w.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,n){return"transform"==e&&(e="patternTransform"),w.Container.prototype.attr.call(this,e,t,n)}},construct:{pattern:function(e,t,n){return this.defs().pattern(e,t,n)}}}),w.extend(w.Defs,{pattern:function(e,t,n){return this.put(new w.Pattern).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),w.Shape=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Element}),w.Bare=w.invent({create:function(e,t){if(this.constructor.call(this,w.create(e)),t)for(var n in t.prototype)"function"==typeof t.prototype[n]&&(this[n]=t.prototype[n])},inherit:w.Element,extend:{words:function(e){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(t.createTextNode(e)),this}}}),w.extend(w.Parent,{element:function(e,t){return this.put(new w.Bare(e,t))}}),w.Symbol=w.invent({create:"symbol",inherit:w.Container,construct:{symbol:function(){return this.put(new w.Symbol)}}}),w.Use=w.invent({create:"use",inherit:w.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,w.xlink)}},construct:{use:function(e,t){return this.put(new w.Use).element(e,t)}}}),w.Rect=w.invent({create:"rect",inherit:w.Shape,construct:{rect:function(e,t){return this.put(new w.Rect).size(e,t)}}}),w.Circle=w.invent({create:"circle",inherit:w.Shape,construct:{circle:function(e){return this.put(new w.Circle).rx((new w.Number(e)).divide(2)).move(0,0)}}}),w.extend(w.Circle,w.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),w.Ellipse=w.invent({create:"ellipse",inherit:w.Shape,construct:{ellipse:function(e,t){return this.put(new w.Ellipse).size(e,t).move(0,0)}}}),w.extend(w.Ellipse,w.Rect,w.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),w.extend(w.Circle,w.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx((new w.Number(e)).divide(2))},height:function(e){return null==e?2*this.ry():this.ry((new w.Number(e)).divide(2))},size:function(e,t){var n=l(this,e,t);return this.rx((new w.Number(n.width)).divide(2)).ry((new w.Number(n.height)).divide(2))}}),w.Line=w.invent({create:"line",inherit:w.Shape,extend:{array:function(){return new w.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,n,r){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:n,y2:r}:(new w.PointArray(e)).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var n=l(this,e,t);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(e,t,n,r){return w.Line.prototype.plot.apply(this.put(new w.Line),null!=e?[e,t,n,r]:[0,0,0,0])}}}),w.Polyline=w.invent({create:"polyline",inherit:w.Shape,construct:{polyline:function(e){return this.put(new w.Polyline).plot(e||new w.PointArray)}}}),w.Polygon=w.invent({create:"polygon",inherit:w.Shape,construct:{polygon:function(e){return this.put(new w.Polygon).plot(e||new w.PointArray)}}}),w.extend(w.Polyline,w.Polygon,{array:function(){return this._array||(this._array=new w.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new w.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var n=l(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}}),w.extend(w.Line,w.Polyline,w.Polygon,{morphArray:w.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),w.Path=w.invent({create:"path",inherit:w.Shape,extend:{morphArray:w.PathArray,array:function(){return this._array||(this._array=new w.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new w.PathArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("d",this.array().move(e,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},size:function(e,t){var n=l(this,e,t);return this.attr("d",this.array().size(n.width,n.height))},width:function(e){return null==e?this.bbox().width:this.size(e,this.bbox().height)},height:function(e){return null==e?this.bbox().height:this.size(this.bbox().width,e)}},construct:{path:function(e){return this.put(new w.Path).plot(e||new w.PathArray)}}}),w.Image=w.invent({create:"image",inherit:w.Shape,extend:{load:function(t){if(!t)return this;var n=this,r=new e.Image;return w.on(r,"load",function(){w.off(r);var e=n.parent(w.Pattern);null!==e&&(0==n.width()&&0==n.height()&&n.size(r.width,r.height),e&&0==e.width()&&0==e.height()&&e.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:r.width,height:r.height,ratio:r.width/r.height,url:t}))}),w.on(r,"error",function(e){w.off(r),"function"==typeof n._error&&n._error.call(n,e)}),this.attr("href",r.src=this.src=t,w.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,n){return this.put(new w.Image).load(e).size(t||0,n||t||0)}}}),w.Text=w.invent({create:function(){this.constructor.call(this,w.create("text")),this.dom.leading=new w.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",w.defaults.attrs["font-family"])},inherit:w.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},y:function(e){var t=this.attr("y"),n="number"==typeof t?t-this.bbox().y:0;return null==e?"number"==typeof t?t-n:t:this.attr("y","number"==typeof e.valueOf()?e+n:e)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)},text:function(e){if(void 0===e){for(var e="",t=this.node.childNodes,n=0,r=t.length;n<r;++n)0!=n&&3!=t[n].nodeType&&1==w.adopt(t[n]).dom.newLined&&(e+="\n"),e+=t[n].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{e=e.split("\n");for(var n=0,i=e.length;n<i;n++)this.tspan(e[n]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new w.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=w.utils.map(w.utils.filterSVGElements(e.childNodes),function(e){return w.adopt(e)});return new w.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,n=0,r=this.dom.leading*new w.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?n+=r:(this.attr("dy",r+n),n=0))}),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new w.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new w.Text).text(e)},plain:function(e){return this.put(new w.Text).plain(e)}}}),w.Tspan=w.invent({create:"tspan",inherit:w.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(w.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),w.extend(w.Text,w.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,n=new w.Tspan;return!1===this._build&&this.clear(),t.appendChild(n.node),n.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),w.TextPath=w.invent({create:"textPath",inherit:w.Parent,parent:w.Text,construct:{morphArray:w.PathArray,path:function(e){for(var t=new w.TextPath,n=this.doc().defs().path(e);this.node.hasChildNodes();)t.node.appendChild(this.node.firstChild);return this.node.appendChild(t.node),t.attr("href","#"+n,w.xlink),this},array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),n=null;return t&&(n=t.plot(e)),null==e?n:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return w.adopt(this.node.firstChild)}}}),w.Nested=w.invent({create:function(){this.constructor.call(this,w.create("svg")),this.style("overflow","visible")},inherit:w.Container,construct:{nested:function(){return this.put(new w.Nested)}}}),w.A=w.invent({create:"a",inherit:w.Container,extend:{to:function(e){return this.attr("href",e,w.xlink)},show:function(e){return this.attr("show",e,w.xlink)},target:function(e){return this.attr("target",e)}},construct:{link:function(e){return this.put(new w.A).to(e)}}}),w.extend(w.Element,{linkTo:function(e){var t=new w.A;return"function"==typeof e?e.call(t,t):t.to(e),this.parent().put(t).put(this)}}),w.Marker=w.invent({create:"marker",inherit:w.Container,extend:{width:function(e){return this.attr("markerWidth",e)},height:function(e){return this.attr("markerHeight",e)},ref:function(e,t){return this.attr("refX",e).attr("refY",t)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(e,t,n){return this.defs().marker(e,t,n)}}}),w.extend(w.Defs,{marker:function(e,t,n){return this.put(new w.Marker).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(n)}}),w.extend(w.Line,w.Polyline,w.Polygon,w.Path,{marker:function(e,t,n,r){var i=["marker"];return"all"!=e&&i.push(e),i=i.join("-"),e=arguments[1]instanceof w.Marker?arguments[1]:this.doc().marker(t,n,r),this.attr(i,e)}});var N={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};["fill","stroke"].forEach(function(e){var t,n={};n[e]=function(n){if(void 0===n)return this;if("string"==typeof n||w.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(e,n);else for(t=N[e].length-1;t>=0;t--)null!=n[N[e][t]]&&this.attr(N.prefix(e,N[e][t]),n[N[e][t]]);return this},w.extend(w.Element,w.FX,n)}),w.extend(w.Element,w.FX,{rotate:function(e,t,n){return this.transform({rotation:e,cx:t,cy:n})},skew:function(e,t,n,r){return 1==arguments.length||3==arguments.length?this.transform({skew:e,cx:t,cy:n}):this.transform({skewX:e,skewY:t,cx:n,cy:r})},scale:function(e,t,n,r){return 1==arguments.length||3==arguments.length?this.transform({scale:e,cx:t,cy:n}):this.transform({scaleX:e,scaleY:t,cx:n,cy:r})},translate:function(e,t){return this.transform({x:e,y:t})},flip:function(e,t){return t="number"==typeof e?e:t,this.transform({flip:e||"both",offset:t})},matrix:function(e){return this.attr("transform",new w.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x((new w.Number(e)).plus(this instanceof w.FX?0:this.x()),!0)},dy:function(e){return this.y((new w.Number(e)).plus(this instanceof w.FX?0:this.y()),!0)},dmove:function(e,t){return this.dx(e).dy(t)}}),w.extend(w.Rect,w.Ellipse,w.Circle,w.Gradient,w.FX,{radius:function(e,t){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new w.Number(e)):this.rx(e).ry(null==t?e:t)}}),w.extend(w.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),w.extend(w.Parent,w.Text,w.Tspan,w.FX,{font:function(e,t){if("object"==typeof e)for(t in e)this.font(t,e[t]);return"leading"==e?this.leading(t):"anchor"==e?this.attr("text-anchor",t):"size"==e||"family"==e||"weight"==e||"stretch"==e||"variant"==e||"style"==e?this.attr("font-"+e,t):this.attr(e,t)}}),w.Set=w.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){var e,t,n=[].slice.call(arguments);for(e=0,t=n.length;e<t;e++)this.members.push(n[e]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;t<n;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new w.RBox;var e=this.members[0].rbox(this.members[0].doc());return this.each(function(){e=e.merge(this.rbox(this.doc()))}),e}},construct:{set:function(e){return new w.Set(e)}}}),w.FX.Set=w.invent({create:function(e){this.set=e}}),w.Set.inherit=function(){var e,t=[];for(var e in w.Shape.prototype)"function"==typeof w.Shape.prototype[e]&&"function"!=typeof w.Set.prototype[e]&&t.push(e);t.forEach(function(e){w.Set.prototype[e]=function(){for(var t=0,n=this.members.length;t<n;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new w.FX.Set(this)):this}}),t=[];for(var e in w.FX.prototype)"function"==typeof w.FX.prototype[e]&&"function"!=typeof w.FX.Set.prototype[e]&&t.push(e);t.forEach(function(e){w.FX.Set.prototype[e]=function(){for(var t=0,n=this.set.members.length;t<n;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}})},w.extend(w.Element,{data:function(e,t,n){if("object"==typeof e)for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(t){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:!0===n||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),w.extend(w.Element,{remember:function(e,t){if("object"==typeof arguments[0])for(var t in e)this.remember(t,e[t]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),w.get=function(e){var n=t.getElementById(y(e)||e);return w.adopt(n)},w.select=function(e,n){return new w.Set(w.utils.map((n||t).querySelectorAll(e),function(e){return w.adopt(e)}))},w.extend(w.Parent,{select:function(e){return w.select(e,this.node)}});var C="abcdef".split("");if("function"!=typeof e.CustomEvent){var k=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=t.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r};k.prototype=e.Event.prototype,w.CustomEvent=k}else w.CustomEvent=e.CustomEvent;return function(t){for(var n=0,r=["moz","webkit"],i=0;i<r.length&&!e.requestAnimationFrame;++i)t.requestAnimationFrame=t[r[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[i]+"CancelAnimationFrame"]||t[r[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame=t.requestAnimationFrame||function(e){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),s=t.setTimeout(function(){e(r+i)},i);return n=r+i,s},t.cancelAnimationFrame=t.cancelAnimationFrame||t.clearTimeout}(e),w});